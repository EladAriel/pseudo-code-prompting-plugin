{
  "$schema": "./schemas/agent-registry.schema.json",
  "version": "2.1.0",
  "description": "Pseudo-Code Prompting Plugin: Transform natural language into structured, validated pseudo-code with 5 specialized agents for analysis, transformation, optimization, compression, and validation.",
  "last_updated": "2026-01-13",

  "discovery": {
    "protocol": "semantic",
    "fallback": "keyword",
    "confidence_threshold": 0.7,
    "max_agents_per_task": 2
  },

  "coordination": {
    "forward_message": {
      "enabled": true,
      "description": "Allow agents to respond directly without supervisor paraphrasing",
      "eligible_agents": ["prompt-transformer", "requirement-validator", "prompt-optimizer"],
      "conditions": {
        "min_confidence": 0.85,
        "task_types": ["direct_answer", "validation_complete", "optimization_complete"]
      }
    },
    "context_isolation": {
      "enabled": true,
      "description": "Each agent operates in focused context for its subtask",
      "shared_context_keys": ["transformed_pseudo_code", "validation_results", "optimization_suggestions"]
    }
  },

  "context_engineering": {
    "attention_positioning": {
      "start": ["system_identity", "promptconverter_rules", "transformation_constraints"],
      "middle": ["reference_patterns", "background_context"],
      "end": ["current_task", "output_format", "quality_checks"]
    },
    "compression": {
      "trigger_threshold": 0.70,
      "target_threshold": 0.50,
      "preserve_recent_messages": 5,
      "strategy": "iterative_summarization"
    }
  },

  "agents": {
    "prompt-analyzer": {
      "display_name": "Prompt Analyzer",
      "color": "blue",
      "model_preference": {
        "analysis": "sonnet",
        "quick_scan": "haiku"
      },
      "capabilities": [
        "ambiguity-detection",
        "complexity-scoring",
        "clarity-assessment",
        "requirement-analysis",
        "intent-extraction"
      ],
      "can_solve_examples": [
        "Analyze this prompt for ambiguities",
        "Check the clarity of my requirements",
        "Score the complexity of this feature request",
        "Identify unclear terms in this specification",
        "What's missing from this requirement?"
      ],
      "skills_used": ["prompt-analyzer"],
      "tools": ["Read", "Grep"],
      "boundaries": {
        "allowed": [".claude/skills/**", "docs/**"],
        "forbidden": ["src/**", "node_modules/**"]
      },
      "handoff_to": ["prompt-transformer", "context-compressor"],
      "pipeline_position": 1
    },

    "prompt-transformer": {
      "display_name": "Prompt Transformer",
      "color": "green",
      "model_preference": {
        "transformation": "sonnet"
      },
      "capabilities": [
        "intent-extraction",
        "function-generation",
        "parameter-inference",
        "constraint-translation",
        "semantic-preservation"
      ],
      "can_solve_examples": [
        "Transform this to pseudo-code",
        "Convert my requirements to function format",
        "Structure this feature request",
        "Create PROMPTCONVERTER format",
        "Generate function-like syntax"
      ],
      "skills_used": ["prompt-structurer"],
      "tools": ["Read", "Write"],
      "boundaries": {
        "allowed": [".claude/skills/**", "docs/**"],
        "forbidden": ["src/**", "node_modules/**"]
      },
      "handoff_to": ["requirement-validator", "prompt-optimizer"],
      "pipeline_position": 2
    },

    "requirement-validator": {
      "display_name": "Requirement Validator",
      "color": "red",
      "model_preference": {
        "validation": "sonnet"
      },
      "capabilities": [
        "completeness-checking",
        "security-validation",
        "edge-case-detection",
        "constraint-verification",
        "gap-identification"
      ],
      "can_solve_examples": [
        "Validate this pseudo-code",
        "Check if my requirements are complete",
        "Find security gaps in this specification",
        "Identify missing parameters",
        "Review this for edge cases"
      ],
      "skills_used": ["requirement-validator"],
      "tools": ["Read", "Grep"],
      "boundaries": {
        "allowed": [".claude/skills/**", "docs/**"],
        "forbidden": ["src/**"]
      },
      "handoff_to": ["prompt-optimizer"],
      "pipeline_position": 3
    },

    "prompt-optimizer": {
      "display_name": "Prompt Optimizer",
      "color": "purple",
      "model_preference": {
        "optimization": "sonnet"
      },
      "capabilities": [
        "parameter-enhancement",
        "constraint-addition",
        "ambiguity-resolution",
        "security-hardening",
        "specification-enrichment"
      ],
      "can_solve_examples": [
        "Optimize this pseudo-code",
        "Enhance my requirements",
        "Add missing security parameters",
        "Improve this specification",
        "Make this implementation-ready"
      ],
      "skills_used": ["prompt-optimizer"],
      "tools": ["Read", "Write", "Grep"],
      "boundaries": {
        "allowed": [".claude/skills/**", "docs/**"],
        "forbidden": ["src/**"]
      },
      "handoff_to": ["requirement-validator"],
      "pipeline_position": 3
    },

    "context-compressor": {
      "display_name": "Context Compressor",
      "color": "orange",
      "model_preference": {
        "compression": "sonnet"
      },
      "capabilities": [
        "requirement-compression",
        "redundancy-elimination",
        "information-density",
        "semantic-preservation",
        "structured-conversion"
      ],
      "can_solve_examples": [
        "Compress this verbose requirement",
        "Reduce this spec to pseudo-code",
        "Condense these requirements",
        "Simplify this documentation",
        "Convert prose to structured format"
      ],
      "skills_used": ["context-compressor"],
      "tools": ["Read", "Write"],
      "boundaries": {
        "allowed": [".claude/skills/**", "docs/**"],
        "forbidden": ["src/**"]
      },
      "handoff_to": ["prompt-transformer", "requirement-validator"],
      "pipeline_position": 1
    }
  },

  "workflows": {
    "full-transformation": {
      "display_name": "Full Transformation Workflow",
      "description": "Complete workflow from analysis to validated pseudo-code",
      "sequence": ["prompt-analyzer", "prompt-transformer", "requirement-validator"],
      "estimated_tokens": 900,
      "success_criteria": [
        "Ambiguity score < 0.3",
        "All critical parameters present",
        "No security gaps identified"
      ]
    },

    "quick-transform": {
      "display_name": "Quick Transform",
      "description": "Fast transformation without deep analysis",
      "sequence": ["prompt-transformer"],
      "estimated_tokens": 200,
      "success_criteria": [
        "Valid pseudo-code generated",
        "Core parameters identified"
      ]
    },

    "optimize-and-validate": {
      "display_name": "Optimize and Validate",
      "description": "Enhance and validate existing pseudo-code",
      "sequence": ["prompt-optimizer", "requirement-validator"],
      "estimated_tokens": 700,
      "success_criteria": [
        "Security parameters added",
        "No critical validation issues",
        "Implementation-ready"
      ]
    },

    "compress-transform-validate": {
      "display_name": "Compress, Transform, Validate",
      "description": "Full workflow from verbose requirements to validated pseudo-code",
      "sequence": ["context-compressor", "prompt-transformer", "requirement-validator"],
      "estimated_tokens": 1000,
      "success_criteria": [
        "80%+ compression ratio achieved",
        "Semantic information preserved",
        "Validation passed"
      ]
    }
  },

  "quality_gates": {
    "transformation": {
      "min_parameters": 2,
      "require_function_name": true,
      "semantic_preservation": true
    },
    "validation": {
      "max_critical_issues": 0,
      "security_check": true,
      "completeness_threshold": 0.8
    },
    "compression": {
      "min_compression_ratio": 0.6,
      "max_information_loss": 0.1
    }
  },

  "progressive_loading": {
    "enabled": true,
    "strategy": "semantic-discovery",
    "tiers": {
      "tier_1_discovery": {
        "description": "Load capabilities.json for relevance matching",
        "typical_tokens": "100-110",
        "when": "Initial skill discovery"
      },
      "tier_2_overview": {
        "description": "Load SKILL.md for methodology and patterns",
        "typical_tokens": "300-800",
        "when": "Skill confirmed relevant"
      },
      "tier_3_specific": {
        "description": "Load reference files for detailed guidance",
        "typical_tokens": "90-300",
        "when": "Specific pattern or validation needed"
      }
    }
  }
}
